@model Order

<div id="detailedOrder" data-customers="@(ViewBag.CustomersJson)">
    @using (Html.BeginForm("DetailedOrder", "Samples"))
    {
        <div class="row">
            <div class="col-md-6">
                <fieldset>
                    <legend>Detailed order</legend>
                    <div class="form-group">
                        @Html.MyLabelFor(m => m.OrderNumber)
                        @Html.MyTextBoxFor(m => m.OrderNumber)
                        <p class="help-block">The unique order number generated by merchant.</p>
                    </div>
                    <div class="form-group">
                        @Html.MyLabelFor(m => m.CurrencyCode)
                        @Html.MyTextBoxFor(m => m.CurrencyCode)
                        <p class="help-block">
                            The three letter ISO-4217 code.
                        </p>
                        <p class="help-block">
                            <span class="label label-primary"><span class="fa fa-lightbulb-o"></span></span>
                            <code>Paynova.Api.Client.Model.CurrencyCode</code> contains some helpers.
                        </p>
                    </div>
                    <div class="form-group">
                        @Html.MyLabelFor(m => m.TotalAmount)
                        @Html.MyTextBoxFor(m => m.TotalAmount)
                        <p class="help-block">
                            <span class="label label-primary"><span class="fa fa-lightbulb-o"></span></span>
                            Accepts decimals.
                        </p>
                    </div>
                </fieldset>
            </div>
            <div class="col-md-6">
                <fieldset>
                    <legend>Customer</legend>
                    <div class="form-group">
                        <label>Customer selection</label>
                        <select class="form-control" data-bind="options: customers, optionsText: 'email', value: selectedCustomer"></select>
                    </div>
                    <div data-bind="with: selectedCustomer">
                        @Html.EditorFor(m => m.Customer)
                    </div>
                </fieldset>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <fieldset>
                    <legend>Billing</legend>
                    <div data-bind="with: selectedCustomer">
                        <div data-bind="with: billingAddress">
                            @Html.EditorFor(m => m.Customer.BillingAddress)
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="col-md-6">
                <fieldset>
                    <legend>Shipping</legend>
                    <div data-bind="with: selectedCustomer">
                        <div data-bind="with: shippingAddress">
                            @Html.EditorFor(m => m.Customer.ShippingAddress)
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>

        <fieldset>
            <legend>Line items</legend>
            @for (int i = 0; i < Model.OrderLines.Count; i++)
            {
                @Html.EditorFor(m => m.OrderLines[i])
            }
        </fieldset>
        <button type="submit" class="btn btn-block btn-primary">Checkout</button>
        @Html.AntiForgeryToken()
    }
</div>
